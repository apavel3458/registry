(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c3f39cd2"],{1681:function(e,t,i){},6773:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-dialog",{attrs:{"max-width":"700px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[e._v(e._s(e.itemTitle))])]),i("v-card-text",[i("v-container",{staticClass:"py-0",attrs:{"grid-list-md":""}},[i("v-form",{ref:"itemForm",model:{value:e.itemFormValid,callback:function(t){e.itemFormValid=t},expression:"itemFormValid"}},[i("v-layout",{attrs:{wrap:""}},[e._t("dataEdit",null,{editedItem:e.editedItem,types:e.itemTypes}),i("v-flex",{attrs:{xs12:""}},[i("v-textarea",{attrs:{filled:"","auto-grow":"",clearable:"",rows:"2","hide-details":"",label:"Comments"},model:{value:e.editedItem.comments,callback:function(t){e.$set(e.editedItem,"comments",t)},expression:"editedItem.comments"}})],1),i("v-divider"),e.itemDetails?e._l(e.itemDetails,function(t,n){return i("v-flex",{key:n,attrs:{xs12:"",sm4:""}},["number"==t.type?[i("v-text-field",{attrs:{type:"number",rules:t.required?[e.rules.required]:[],label:t.text,filled:"","hide-details":""},model:{value:e.editedItem.details[t.name],callback:function(i){e.$set(e.editedItem.details,t.name,e._n(i))},expression:"editedItem.details[detail.name]"}})]:"boolean"==t.type?[i("v-checkbox",{attrs:{rules:t.required?[e.rules.required]:[],label:t.text,"hide-details":""},model:{value:e.editedItem.details[t.name],callback:function(i){e.$set(e.editedItem.details,t.name,i)},expression:"editedItem.details[detail.name]"}})]:"string"==t.type?[i("v-text-field",{attrs:{filled:"",rules:t.required?[e.rules.required]:[],label:t.text,"hide-details":""},model:{value:e.editedItem.details[t.name],callback:function(i){e.$set(e.editedItem.details,t.name,"string"===typeof i?i.trim():i)},expression:"editedItem.details[detail.name]"}})]:"date"==t.type?[i("v-text-field",{attrs:{filled:"",mask:"####-##-##","prepend-icon":"event",rules:t.required?[e.rules.required]:[],label:t.text,"hide-details":""},model:{value:e.editedItem.details[t.name],callback:function(i){e.$set(e.editedItem.details,t.name,i)},expression:"editedItem.details[detail.name]"}})]:"autocomplete string"==t.type?[i("v-autocomplete",{attrs:{filled:"",clearable:"",rules:t.required?[e.rules.required]:[],items:t.options,label:t.text},model:{value:e.editedItem.details[t.name],callback:function(i){e.$set(e.editedItem.details,t.name,i)},expression:"editedItem.details[detail.name]"}})]:"combobox string"==t.type?[i("v-combobox",{attrs:{filled:"",clearable:"",rules:t.required?[e.rules.required]:[],items:t.options,label:t.text},nativeOn:{input:function(i){e.editedItem.details[t.name]=i.srcElement.value}},model:{value:e.editedItem.details[t.name],callback:function(i){e.$set(e.editedItem.details,t.name,"string"===typeof i?i.trim():i)},expression:"editedItem.details[detail.name]"}})]:e._e()],2)}):e._e()],2)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),i("div",{staticClass:"tableWrapper"},[i("v-data-table",{staticClass:"itemTable",attrs:{headers:e.tableHeaders,items:e.studies,"single-expand":!0,expanded:e.expanded,"item-key":"id","hide-default-footer":"","must-sort":"",options:e.options},on:{"update:expanded":function(t){e.expanded=t},"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item",fn:function(t){return[i("tr",{on:{click:function(i){e.expanded.length&&e.expanded[0]==t.item?e.expanded=[]:e.expanded=[t.item]}}},[e._t("dataTable",null,{item:t.item}),i("td",{staticClass:"justify-center nowrap"},[i("v-btn",{staticClass:"my-0 mx-0 text-center",staticStyle:{display:"inline-block"},attrs:{outlined:"","x-small":"",dark:"",fab:"",color:"grey darken-1"},on:{click:function(i){return i.stopPropagation(),e.editItem(t.item)}}},[i("v-icon",[e._v("mdi-pencil")])],1),i("v-btn",{staticClass:"my-0 mx-1 text-center",staticStyle:{display:"inline-block"},attrs:{outlined:"","x-small":"",dark:"",fab:"","ma-0":"",color:"grey darken-1"},on:{click:function(i){return i.stopPropagation(),e.deleteItem(t.item)}}},[i("v-icon",[e._v("mdi-delete")])],1)],1)],2)]}},{key:"no-data",fn:function(){return[e._v("\n        No items found.  Click "),i("v-btn",{attrs:{dark:"",fab:"",small:"",color:"green lighten-2"},on:{click:function(t){e.dialog=!0}}},[i("v-icon",[e._v("mdi-plus")])],1),e._v(" to add an item.\n      ")]},proxy:!0},{key:"expanded-item",fn:function(t){return[i("td",{attrs:{colspan:t.headers.length}},[i("v-card",{staticClass:"elevation-1 expandedRow"},[i("v-card-text",[e._l(e.itemsAndDetails(t.item),function(n,a){return i("span",{key:a,staticClass:"detailParent"},[i("v-chip",{class:{falseBoolean:"boolean"==n.type&&!n.value},attrs:{outlined:"boolean"==n.type&&!n.value}},[i("span",{staticClass:"detailHeader"},[e._v(e._s(n.text))]),!0!==t.item.details[n.name]&&t.item.details[n.name]?i("span",{staticClass:"detailValue"},[i("span",{staticClass:"detailHeader"},[e._v(": ")]),e._v(e._s(t.item.details[n.name])+"\n                ")]):e._e()])],1)}),0==Object.keys(t.item.details).length?i("span",[e._v("\n              No extra properties\n            ")]):e._e()],2)],1)],1)]}}],null,!0)})],1),i("v-btn",{staticStyle:{right:"5em"},attrs:{absolute:"",dark:"",fab:"",bottom:"",small:"",right:"",color:"green lighten-2"},on:{click:function(t){e.dialog=!0}}},[i("v-icon",[e._v("mdi-plus")])],1),i("v-snackbar",{attrs:{color:"error",timeout:3e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    "+e._s(e.snackbarMessage)+"\n    ")])],1)},a=[],r=(i("8e6e"),i("7f7f"),i("ac6a"),i("456d"),i("7514"),i("96cf"),i("3b8d")),s=(i("c5f6"),i("ee1d"),i("28a5"),i("bd86")),o=i("2ef0"),l=i.n(o),d=i("e5a6"),c=i("2f62");function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(i,!0).forEach(function(t){Object(s["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var p={props:["typesJson","itemType","itemTitle","tableHeaders","defaultItem","sortByP"],data:function(){return{dialog:!1,options:{sortDesc:[!0],sortBy:[],itemsPerPage:-1,multiSort:!0,mustSort:!0},expanded:[],singleExpand:null,studies:[],editedIndex:-1,editedItem:{},itemTypes:[],itemTypeName:"",itemFormValid:!1,snackbar:!1,snackbarMessage:"ERROR",rules:{required:function(e){return!!e||"Required"}}}},computed:m({formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"},itemDetails:function(){var e=this,t=this.itemTypes.filter(function(t){return t[e.itemTypeName]==e.editedItem[e.itemTypeName]});return 0==t.length?null:t[0].details}},Object(c["d"])({patient:"activePatient"})),watch:{patient:function(e){this.initialize(e.id)},dialog:function(e){e||this.close()},"editedItem.EFtext":function(e){if(e){var t=e.split("-");1===t.length||""==t[1]||Number.isNaN(t[1])?this.editedItem.EF=parseFloat(t[0]):this.editedItem.EF=(parseFloat(t[0])+parseFloat(t[1]))/2}}},created:function(){this.initialize(this.patient.id)},methods:{initialize:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.itemTypes=this.typesJson,this.itemTypeName=this.itemType+"Name",t&&d["a"].itemGet(t,this.itemType).then(function(e){i.studies=e}).catch(function(e){400==e.response.status&&e.response.data.error&&alert(e.response.data.error)}),this.sortByP&&this.options.sortBy.push(this.sortByP);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),itemDefaultDetails:function(e){var t=this;if(e){var i=this.itemTypes.filter(function(i){return i[t.itemTypeName]==e});return 0==i.length?null:i[0].details}},itemsAndDetails:function(e){var t=this,i=this.itemTypes.find(function(i){return i[t.itemTypeName]==e[t.itemTypeName]});if(!i)return null;var n=Object.keys(e.details).map(function(t){var n=i.details.find(function(e){return e.name==t});return n?m({},n,{value:e.details[t]}):{name:t,text:t,value:e.details[t]}});return n},editItem:function(e){var t=this;this.editedIndex=this.studies.indexOf(e),e.details&&!Array.isArray(e.details)||(e.details={}),this.editedItem=l.a.merge(l.a.assign({},this.defaultItem),e),this.editedItem.details=l.a.pick(this.editedItem.details,this.itemTypes.find(function(i){return i[t.itemTypeName]==e[t.itemTypeName]}).details.map(function(e){return e.name})),this.dialog=!0},deleteItem:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=this.studies.indexOf(t),!confirm("Are you sure you want to delete this "+this.itemType+" item?")){e.next=6;break}return e.next=4,d["a"].itemDelete(t,this.itemType);case 4:n=e.sent,n.error?this.error=n.error:this.studies.splice(i,1);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1},300)},save:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.itemForm.validate()){e.next=4;break}return this.snackbarMessage="Please ensure the information is filled out correctly",this.snackbar=!0,e.abrupt("return");case 4:if(this.editedItem.patientId=this.patient.id,this.editedItem.visibleDetail=this.getVisibleDetail(this.editedItem),this.$emit("preSave",this.editedItem),!(this.editedIndex>-1)){e.next=12;break}return e.next=10,d["a"].itemPut(this.editedItem,this.itemType).then(function(e){Object.assign(t.studies[t.editedIndex],e)}).catch(function(e){alert(e)});case 10:e.next=14;break;case 12:return e.next=14,d["a"].itemPost(this.editedItem,this.itemType).then(function(e){t.studies.push(e)}).catch(function(e){400==e.response.status&&e.response.data.error&&alert(e.response.data.error)});case 14:this.close();case 15:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getItemSchema:function(e){var t=this;if(e.schema)return e.schema;var i=this.itemTypes.find(function(i){return i[t.itemTypeName]==e[t.itemTypeName]});return i?(e.schema=i,i):[]},getVisibleDetail:function(e){var t="--",i=this.getItemSchema(e),n=i.visibleDetail;if(n){var a=i.details.find(function(e){return e.name==n});return a&&"boolean"==a.type?e.details[n]?a.text:t:e.details[n]}return"--"}},mounted:function(){}},h=p,f=(i("d0f7"),i("2877")),b=i("6544"),g=i.n(b),v=i("c6a6"),x=i("8336"),y=i("b0af"),I=i("99d9"),w=i("ac7c"),k=i("cc20"),O=(i("2bfd"),i("b974")),T=i("80d2"),S=v["a"].extend({name:"v-combobox",props:{delimiters:{type:Array,default:()=>[]},returnObject:{type:Boolean,default:!0}},data:()=>({editingIndex:-1}),computed:{counterValue(){return this.multiple?this.selectedItems.length:(this.internalSearch||"").toString().length},hasSlot(){return O["a"].options.computed.hasSlot.call(this)||this.multiple},isAnyValueAllowed(){return!0},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!!this.$slots["no-data"]&&!this.hideNoData)}},methods:{onInternalSearchChanged(e){if(e&&this.multiple&&this.delimiters.length){const t=this.delimiters.find(t=>e.endsWith(t));null!=t&&(this.internalSearch=e.slice(0,e.length-t.length),this.updateTags())}this.updateMenuDimensions()},genChipSelection(e,t){const i=O["a"].options.methods.genChipSelection.call(this,e,t);return this.multiple&&(i.componentOptions.listeners={...i.componentOptions.listeners,dblclick:()=>{this.editingIndex=t,this.internalSearch=this.getText(e),this.selectedIndex=-1}}),i},onChipInput(e){O["a"].options.methods.onChipInput.call(this,e),this.editingIndex=-1},onEnterDown(e){e.preventDefault(),this.$nextTick(()=>{this.getMenuIndex()>-1||this.updateSelf()})},onFilteredItemsChanged(e,t){this.autoSelectFirst&&v["a"].options.methods.onFilteredItemsChanged.call(this,e,t)},onKeyDown(e){const t=e.keyCode;O["a"].options.methods.onKeyDown.call(this,e),this.multiple&&t===T["u"].left&&0===this.$refs.input.selectionStart?this.updateSelf():t===T["u"].enter&&this.onEnterDown(e),this.changeSelectedIndex(t)},onTabDown(e){if(this.multiple&&this.internalSearch&&-1===this.getMenuIndex())return e.preventDefault(),e.stopPropagation(),this.updateTags();v["a"].options.methods.onTabDown.call(this,e)},selectItem(e){this.editingIndex>-1?this.updateEditing():O["a"].options.methods.selectItem.call(this,e)},setSelectedItems(){null==this.internalValue||""===this.internalValue?this.selectedItems=[]:this.selectedItems=this.multiple?this.internalValue:[this.internalValue]},setValue(e){O["a"].options.methods.setValue.call(this,e||this.internalSearch)},updateEditing(){const e=this.internalValue.slice();e[this.editingIndex]=this.internalSearch,this.setValue(e),this.editingIndex=-1},updateCombobox(){const e=Boolean(this.$scopedSlots.selection)||this.hasChips;e&&!this.searchIsDirty||(this.internalSearch!==this.getText(this.internalValue)&&this.setValue(),e&&(this.internalSearch=void 0))},updateSelf(){this.multiple?this.updateTags():this.updateCombobox()},updateTags(){const e=this.getMenuIndex();if(e<0&&!this.searchIsDirty)return;if(this.editingIndex>-1)return this.updateEditing();const t=this.selectedItems.indexOf(this.internalSearch);if(t>-1){const e=this.internalValue.slice();e.splice(t,1),this.setValue(e)}if(e>-1)return this.internalSearch=null;this.selectItem(this.internalSearch),this.internalSearch=null}}}),V=i("a523"),j=i("8fea"),C=i("169a"),D=i("ce7e"),R=i("0e8f"),_=i("4bd4"),P=i("132d"),N=i("a722"),F=i("2db4"),$=i("2fa4"),E=i("8654"),H=i("a844"),q=Object(f["a"])(h,n,a,!1,null,"4dc96e6d",null);t["a"]=q.exports;g()(q,{VAutocomplete:v["a"],VBtn:x["a"],VCard:y["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:I["c"],VCheckbox:w["a"],VChip:k["a"],VCombobox:S,VContainer:V["a"],VDataTable:j["a"],VDialog:C["a"],VDivider:D["a"],VFlex:R["a"],VForm:_["a"],VIcon:P["a"],VLayout:N["a"],VSnackbar:F["a"],VSpacer:$["a"],VTextField:E["a"],VTextarea:H["a"]})},"99c3":function(e,t,i){},a844:function(e,t,i){"use strict";i("1681");var n=i("8654"),a=i("58df");const r=Object(a["a"])(n["a"]);t["a"]=r.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:e=>!isNaN(parseFloat(e))},rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseInt(e,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...n["a"].options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout(()=>{this.autoGrow&&this.calculateInputHeight()},0)},methods:{calculateInputHeight(){const e=this.$refs.input;if(!e)return;e.style.height="0";const t=e.scrollHeight,i=parseInt(this.rows,10)*parseFloat(this.rowHeight);e.style.height=Math.max(i,t)+"px"},genInput(){const e=n["a"].options.methods.genInput.call(this);return e.tag="textarea",delete e.data.attrs.type,e.data.attrs.rows=this.rows,e},onInput(e){n["a"].options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})},d0f7:function(e,t,i){"use strict";var n=i("99c3"),a=i.n(n);a.a},e5a6:function(e,t,i){"use strict";i("96cf");var n=i("3b8d"),a=i("3f4a");t["a"]={diagnosisGet:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])().get("registry/patient/".concat(t,"/data/diagnosis"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),diagnosisPost:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])().post("registry/patient/".concat(t.patientId,"/data/diagnosis"),t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),diagnosisPut:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])().put("registry/patient/".concat(t.patientId,"/data/diagnosis/").concat(t.id),t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),diagnosisDelete:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])().delete("registry/patient/".concat(t.patientId,"/data/diagnosis/").concat(t.id),t.id);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),itemGet:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])().get("registry/patient/".concat(t,"/data/").concat(i));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)}));function t(t,i){return e.apply(this,arguments)}return t}(),itemPost:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])().post("registry/patient/".concat(t.patientId,"/data/").concat(i),t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)}));function t(t,i){return e.apply(this,arguments)}return t}(),itemPut:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])().put("registry/patient/".concat(t.patientId,"/data/").concat(i,"/").concat(t.id),t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)}));function t(t,i){return e.apply(this,arguments)}return t}(),itemDelete:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["a"])().delete("registry/patient/".concat(t.patientId,"/data/").concat(i,"/").concat(t.id),t.id);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)}));function t(t,i){return e.apply(this,arguments)}return t}()}}}]);
//# sourceMappingURL=chunk-c3f39cd2.11d4c83e.js.map